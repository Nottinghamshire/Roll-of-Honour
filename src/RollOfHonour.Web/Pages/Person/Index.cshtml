@page
@using Shared.Components;
@using Core.Enums;

@model RollOfHonour.Web.Pages.Person.PeopleModel
@{
}

<section class="panel with-background bg-app">
    <div class="container is-fluid">

        <div class="columns is-multiline is-vcentered">
            <div class="column">
                <div class="text-block">
                    <h1>People records</h1>
                    <p>Our database contains thousands of records detailing those who were lost during the World Wars.
                        You can use this page to view our records alphabetically, or use our <a href="/search"
                            title="Search our records">Search</a> page to narrow down your search.</p>
                </div>
            </div>
            @(await Html.RenderComponentAsync<IndexSearchComponent>(RenderMode.ServerPrerendered, new { SelectedQueryType = QueryType.Person }))
        </div>

        <div class="index-block">

            <div class="columns is-multiline is-mobile">
                @foreach (var person in Model.People)
                {
                    <div class="column is-12-mobile is-6-tablet is-6-desktop is-4-widescreen is-3-fullhd">
                        <a asp-page="/Person/Details" asp-route-id="@person.Id" title="Learn about @person.Name"
                            class="index-card">
                            <div class="columns is-mobile">
                                <div class="column is-4-mobile">
                                    <div class="picture-block index-picture">
                                        <div class="picture-border">
                                            <div class="picture-embed"
                                                style="background-image: url(@person.MainPhoto?.ImageUriMedium);"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <span class="rank">@person.Rank</span>
                                    <span class="name">@person.Name</span>
                                    <span class="unit">@person.UnitRegimentString</span>
                                    <span class="date">@person.DateOfDeathString</span>
                                    <span class="link"><i class="fal fa-glasses"></i> Read more</span>
                                </div>
                            </div>
                        </a>
                    </div>
                }
            </div>

            <vc:pagination-component current-page=@Model.PageNumber page-count=@Model.People.TotalPages
                slug="/person/index">
            </vc:pagination-component>

        </div>
    </div>
</section>